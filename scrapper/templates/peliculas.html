{% extends "home.html" %}
{% load static %}

<link rel="stylesheet" href="{% static 'css/landing.css' %}">
{% block title%}Peliculas{% endblock %}

    {% block navbar1 %}
    <nav>
        <ul class="nav nav-tabs justify-content-center">
            <li class="nav-item">
                <a class="nav-link active" href="{% url 'tipo_view' tipo='pelicula' %}">Peliculas</a>
            </li>
            <li class="nav-item">
                <a class="nav-link " href="{% url 'tipo_view' tipo='serie' %}">Series</a>
            </li>
        </ul>
    </nav>

    <nav>
        <ul class="nav nav-underline nav-fill">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'stream_view' tipo='pelicula' stream='netflix' %}">Netflix</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'stream_view' tipo='pelicula' stream='amazon_prime' %}">Prime Video</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'stream_view' tipo='pelicula' stream='disney_plus' %}">Disney+</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'stream_view' tipo='pelicula' stream='max_us' %}">Max</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'stream_view' tipo='pelicula' stream='paramount_plus' %}">Paramount</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'stream_view' tipo='pelicula' stream='apple_tv_us' %}">Apple TV</a>
            </li>
        </ul>
    </nav>

    {% endblock %}

{% block main %}
    <p class="d-inline-flex gap-1">
        <button type="button" class="btn btn-light" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
            Filtros
        </button>
    </p>
    <div class="collapse" id="collapseExample">
        <div class="card card-body">
            <div class="container text-center">
                <div class="row">
                    <div class="col-4">
                        <div class="row">
                            <label for="">Critica</label>
                            <input type="text">
                        </div>
                        <div class="row">
                            <label for="">Audiencia</label>
                            <input type="text">
                        </div>
                        <div class="row">
                            <label for="">Usuario</label>
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="row">
                            <label for="">Fecha</label>
                            <input type="text">
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="row">
                            <label for="">Streamming</label>
                            <select>
                                <option value="opcion1"> </option>
                                <option value="opcion1">Netflix</option>
                                <option value="opcion2">Prime Video</option>
                                <option value="opcion3">Disney+</option>
                                <option value="opcion1">Max</option>
                                <option value="opcion2">Paramount</option>
                                <option value="opcion3">Apple TV</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <h1>PELICULAS</h1>
    <main>
        
        {% for pelicula in peliculas %}
        <div class="card text-center" style="width: 18rem; margin: 20px 0px;">
            <img src="{{ pelicula.Imagen }}" class="card-img-top" alt="">
            <div class="card-body">
                <h4 class="card-text">{{ pelicula.Nombre_pelicula }}</h4>
                <h5 class="card-text">{{ pelicula.Fecha_streaming }}</h5>
                <span>Criticas: {{ pelicula.Criticsscore }}</span>
                <span>Audiencia: {{ pelicula.Audiencescore }}</span>
            </div>
        </div>
        {% endfor %}
    </main>
{% endblock %}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
// Obtén la URL actual
var currentURL = window.location.pathname;

// Agrega una barra diagonal al principio si no la tiene
if (!currentURL.startsWith('/')) {
    currentURL = '/' + currentURL;
}

// Busca el enlace que coincide con la URL actual y añade la clase "active"
$("nav ul li a").each(function() {
    if ($(this).attr("href") == currentURL) {
        $(this).addClass("active");
    }
});
</script>
